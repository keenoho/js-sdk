{"version":3,"file":"keenoho.umd.external.min.js","sources":["../../src/constant/index.js","../../src/util/index.js","../../src/config/index.js","../../src/util/request.js","../../src/signature/index.js","../../src/util/eventEmitter.js","../../src/sdk.js","../../index.js"],"sourcesContent":["export const PLATFORM_NODE = 'node'\nexport const PLATFORM_BROWSER = 'browser'\n","import { PLATFORM_NODE, PLATFORM_BROWSER } from '../constant';\n\nexport function judgePlatform() {\n  return typeof document === 'undefined' ? PLATFORM_NODE : PLATFORM_BROWSER;\n}\n","import { judgePlatform } from '../util';\nimport { PLATFORM_BROWSER } from '../constant';\n\nconst storeConfig = {\n  platform: judgePlatform(),\n  app: undefined,\n  signature: undefined,\n  publicKey: undefined,\n  env: 'production',\n  mode: 'production',\n  apiHost: undefined,\n  ttl: 3200,\n};\n\nexport function loadBrowserConfig() {\n  const app = window.APP || undefined;\n  const env = window.ENV || undefined;\n  const mode = window.MODE || undefined;\n  const publicKey = window.APP_PUBLIC_KEY || undefined;\n  const ttl = window.SIGNATURE_TTL || 3200;\n  const apiHost =\n    window.SYSTEMCE_HOST ||\n    (location.protocol.indexOf('https') > -1 ? 'http://api.keenoho.space' : 'https://api.keenoho.space');\n  setConfig({\n    app,\n    env,\n    mode,\n    publicKey,\n    ttl,\n    apiHost,\n  });\n}\n\nexport function loadNodeConfig() {}\n\nexport function loadConfig() {\n  if (judgePlatform() === PLATFORM_BROWSER) {\n    loadBrowserConfig();\n  } else {\n    loadNodeConfig();\n  }\n}\n\nexport function getConfig(key) {\n  if (key in storeConfig) {\n    return storeConfig[key];\n  }\n  return storeConfig;\n}\n\nexport function setConfig(key, value) {\n  if (arguments.length == 1 && typeof arguments[0] === 'object') {\n    for (let k in arguments[0]) {\n      storeConfig[k] = arguments[0][k];\n    }\n  } else if (arguments.length == 2) {\n    storeConfig[key] = value;\n  }\n}\n\nexport function checkConfig(checkSignature = false) {\n  if (!storeConfig.app || !storeConfig.publicKey) {\n    throw new Error('the app or publicKey is not set in config, please use setConfig to set the values');\n  }\n  if (checkSignature && !storeConfig.signature) {\n    throw new Error('the signature has not sign, please use signature.sign to sign');\n  }\n}\n","import axios from 'axios';\nimport { getConfig } from '../config';\nimport { computeSession } from '../signature';\n\nconst defaultAxiosOptions = {\n  url: '',\n  baseURL: '',\n  params: undefined,\n  data: undefined,\n  header: undefined,\n  method: 'GET',\n  cancelToken: undefined,\n};\nconst defaultRequestOption = {\n  needApp: true,\n  needSignature: true,\n  needSessionId: true,\n  targetCode: 0,\n  takeInnerData: false,\n};\n\nconst Request = axios.create();\nRequest.interceptors.request.use(\n  function (config) {\n    const { requestOptions = defaultRequestOption } = config;\n    const { app, signature, apiHost } = getConfig();\n    if (!config.baseURL && apiHost) {\n      config.baseURL = apiHost;\n    }\n    if (!config.headers) {\n      config.headers = {};\n    }\n    if (requestOptions.needApp) {\n      config.headers['x-app'] = app;\n    }\n    if (requestOptions.needSignature) {\n      config.headers['x-signature'] = signature;\n    }\n    if (requestOptions.needSessionId) {\n      const u = new URL(config.url.indexOf('http') > -1 ? config.url : config.baseURL + config.url);\n      const pathname = u.pathname;\n      config.headers['x-session-id'] = computeSession(app, pathname, signature);\n    }\n\n    return config;\n  },\n  function (error) {\n    return Promise.reject(error);\n  }\n);\nRequest.interceptors.response.use(\n  function (response) {\n    const { requestOptions = defaultRequestOption } = response.config;\n    const data = response.data;\n    if (typeof data === 'object' && 'code' in data && 'msg' in data) {\n      const code = data.code;\n      if (code !== requestOptions.targetCode) {\n        throw data;\n      }\n    }\n\n    let finalData = data;\n    if (requestOptions.takeInnerData && typeof data === 'object' && 'data' in data) {\n      finalData = data.data;\n    }\n    return finalData;\n  },\n  function (error) {\n    if (error instanceof axios.AxiosError) {\n      const { response } = error;\n      if (!response) {\n        return Promise.reject(error);\n      }\n\n      const { requestOptions = defaultRequestOption } = response.config;\n      const data = response.data;\n      if (typeof data === 'object' && 'code' in data && 'msg' in data) {\n        const code = data.code;\n        if (code !== requestOptions.targetCode) {\n          return Promise.reject(data);\n        }\n      }\n\n      let finalData = data;\n      if (requestOptions.takeInnerData && typeof data === 'object' && 'data' in data) {\n        finalData = data.data;\n      }\n      return Promise.reject(finalData);\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport function request(axiosOptions = defaultAxiosOptions, requestOptions = defaultRequestOption) {\n  axiosOptions = Object.assign({}, defaultAxiosOptions, axiosOptions);\n  requestOptions = Object.assign({}, defaultRequestOption, requestOptions);\n  return Request({\n    ...axiosOptions,\n    requestOptions,\n  });\n}\n\nexport function get(axiosOptions = defaultAxiosOptions, requestOptions = defaultRequestOption) {\n  axiosOptions.method = 'GET';\n  return request(axiosOptions, requestOptions);\n}\n\nexport function post(axiosOptions = defaultAxiosOptions, requestOptions = defaultRequestOption) {\n  axiosOptions.method = 'POST';\n  return request(axiosOptions, requestOptions);\n}\n","import CryptoJS from 'crypto-js';\nimport { v4 as uuid } from 'uuid';\nimport { getConfig, checkConfig, setConfig } from '../config';\nimport { get } from '../util/request';\n\nconst apiMap = {\n  v1: {\n    SignatureSign: '/v1/signature/sign',\n    SignatureCheck: '/v1/signature/check',\n    SignatureRefresh: '/v1/signature/refresh',\n    SignatureData: '/v1/signature/data',\n  },\n};\n\nexport function computeSign(app, ts, ttl, uid, publicKey) {\n  const str = `${app}${ts}${ttl}${uid}`.split('').sort().join('');\n  return CryptoJS.HmacSHA1(str, publicKey);\n}\n\nexport function computeSession(app, path, sign) {\n  const str = `${app}:${path}`.split('').sort().join('');\n  return CryptoJS.HmacSHA1(str, sign);\n}\n\nexport async function sign() {\n  checkConfig();\n  const { app, publicKey, ttl } = getConfig();\n  const ts = Date.now();\n  const uid = uuid();\n  const sig = computeSign(app, ts, ttl, uid, publicKey);\n  const res = await get(\n    {\n      url: apiMap.v1.SignatureSign,\n      params: {\n        app,\n        ts,\n        ttl,\n        sig,\n        randomId: uid,\n      },\n    },\n    {\n      needApp: false,\n      needSignature: false,\n      needSessionId: false,\n    }\n  );\n  if (res && res.code === 0) {\n    setConfig('signature', res.data);\n  }\n  return res;\n}\n\nexport async function check() {\n  checkConfig();\n  return await get({\n    url: apiMap.v1.SignatureCheck,\n    params: {},\n  });\n}\n\nexport async function refresh() {\n  checkConfig();\n  return await get({\n    url: apiMap.v1.SignatureRefresh,\n    params: {},\n  });\n}\n\nexport async function data() {\n  checkConfig();\n  return await get({\n    url: apiMap.v1.SignatureData,\n    params: {},\n  });\n}\n","export default class EventEmitter {\n  callbacks = {};\n  addEventListener(type, callback) {\n    this.callbacks[type] = callback;\n  }\n  removeEventListener(type) {\n    delete this.callbacks[type];\n  }\n  emit(type, ...args) {\n    if (typeof this.callbacks[type] === 'function') {\n      this.callbacks[type](...args);\n    }\n  }\n}\n","import { getConfig, loadConfig, setConfig } from './config';\nimport Logger from './util/logger';\nimport EventEmitter from './util/eventEmitter';\nimport { sign, check, refresh } from './signature';\nimport { request } from './util/request';\n\nconst storeKeyMap = {\n  signature: 'keenoho_signature',\n  app: 'keenoho_app',\n  publicKey: 'keenoho_publicKey',\n};\n\nexport default class SDK extends (Logger, EventEmitter) {\n  config = {};\n  constructor() {\n    super();\n    this.initConfig();\n    this.initSignature();\n  }\n\n  config(valueMap) {\n    setConfig(valueMap);\n    this.config = Object.assign(this.config, getConfig());\n  }\n\n  ready(callback) {\n    this.addEventListener('ready', callback);\n  }\n\n  error(callback) {\n    this.addEventListener('error', callback);\n  }\n\n  initConfig() {\n    loadConfig();\n    const storeApp = localStorage.getItem(storeKeyMap.app);\n    const storePublicKey = localStorage.getItem(storeKeyMap.publicKey);\n    this.config = Object.assign({}, getConfig());\n    if (storeApp) {\n      setConfig('app', +storeApp || undefined);\n      this.config.app = +storeApp || undefined;\n    }\n    if (storePublicKey) {\n      setConfig('publicKey', storePublicKey);\n      this.config.publicKey = storePublicKey;\n    }\n  }\n\n  async initSignature() {\n    const storeSignature = localStorage.getItem(storeKeyMap.signature);\n    if (storeSignature) {\n      setConfig('signature', storeSignature);\n      const checkRes = await check()\n        .then(() => {\n          return true;\n        })\n        .catch(() => {\n          setConfig('signature', undefined);\n          return false;\n        });\n\n      if (checkRes) {\n        const refreshRes = await refresh()\n          .then(() => {\n            return true;\n          })\n          .catch(() => {\n            setConfig('signature', undefined);\n            return false;\n          });\n        if (refreshRes) {\n          return;\n        }\n      }\n    }\n    await sign()\n      .then((res) => {\n        if (res && res.code == 0 && res.data) {\n          return res.data;\n        }\n        throw res;\n      })\n      .then((res) => {\n        localStorage.setItem(storeKeyMap.signature, res);\n      })\n      .catch((err) => {\n        setConfig('signature', undefined);\n        return err;\n      });\n  }\n\n  addPlugin(pluginFunc) {\n    pluginFunc.call(this);\n  }\n\n  sendRequest(axiosOptions, requestOptions) {\n    return request(axiosOptions, requestOptions);\n  }\n}\n","import * as config from './src/config';\nimport * as signature from './src/signature';\nimport * as request from './src/util/request';\nimport SDK from './src/sdk';\n\nexport default {\n  config,\n  signature,\n  request,\n  SDK,\n};\n"],"names":["PLATFORM_NODE","PLATFORM_BROWSER","judgePlatform","document","storeConfig","platform","app","undefined","signature","publicKey","env","mode","apiHost","ttl","loadBrowserConfig","setConfig","window","APP","ENV","MODE","APP_PUBLIC_KEY","SIGNATURE_TTL","SYSTEMCE_HOST","location","protocol","indexOf","loadConfig","getConfig","key","value","arguments","length","_typeof","k","checkConfig","checkSignature","Error","defaultAxiosOptions","url","baseURL","params","data","header","method","cancelToken","defaultRequestOption","needApp","needSignature","needSessionId","targetCode","takeInnerData","Request","axios","create","request","axiosOptions","requestOptions","Object","assign","_objectSpread","get","interceptors","use","config","_config$requestOption","_getConfig","headers","pathname","URL","computeSession","error","Promise","reject","response","_response$config$requ","code","finalData","AxiosError","_response$config$requ2","apiMap","v1","SignatureSign","SignatureCheck","SignatureRefresh","SignatureData","computeSign","ts","uid","str","concat","split","sort","join","CryptoJS","HmacSHA1","path","sign","_sign","apply","this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","sig","res","wrap","_context","prev","next","Date","now","uuid","v4","randomId","sent","abrupt","stop","check","_check","_callee2","_context2","refresh","_refresh","_callee3","_context3","_data","_callee4","_context4","EventEmitter","_classCallCheck","_defineProperty","_createClass","type","callback","callbacks","_this$callbacks","_len","args","Array","_key","storeKeyMap","SDK","_ref","_inherits","_initSignature","_super","_createSuper","_this","_assertThisInitialized","call","initConfig","initSignature","valueMap","addEventListener","storeApp","localStorage","getItem","storePublicKey","storeSignature","then","setItem","err","pluginFunc","Logger"],"mappings":"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"}