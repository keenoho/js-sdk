{"version":3,"file":"keenoho.js","sources":["../src/constant/index.js","../src/util/index.js","../src/config/index.js","../src/util/request.js","../src/signature/index.js","../src/user/index.js","../src/util/eventEmitter.js","../src/sdk.js","../index.js"],"sourcesContent":["export const PLATFORM_NODE = 'node';\nexport const PLATFORM_BROWSER = 'browser';\nexport const apiMap = {\n  v1: {\n    SignatureSign: '/v1/signature/sign',\n    SignatureCheck: '/v1/signature/check',\n    SignatureRefresh: '/v1/signature/refresh',\n    SignatureData: '/v1/signature/data',\n    UserLogin: '/v1/user/login',\n    UserInfo: '/v1/user/info',\n  },\n};\n","import { PLATFORM_NODE, PLATFORM_BROWSER } from '../constant';\n\nexport function judgePlatform() {\n  return typeof document === 'undefined' ? PLATFORM_NODE : PLATFORM_BROWSER;\n}\n","import { judgePlatform } from '../util';\nimport { PLATFORM_BROWSER } from '../constant';\n\nconst storeConfig = {\n  platform: judgePlatform(),\n  app: undefined,\n  signature: undefined,\n  publicKey: undefined,\n  env: 'production',\n  mode: 'production',\n  apiHost: undefined,\n  ttl: 3200,\n};\n\nexport function loadBrowserConfig() {\n  const app = window.APP || undefined;\n  const env = window.ENV || undefined;\n  const mode = window.MODE || undefined;\n  const publicKey = window.APP_PUBLIC_KEY || undefined;\n  const ttl = window.SIGNATURE_TTL || 3200;\n  const apiHost =\n    window.SYSTEMCE_HOST ||\n    (location.protocol.indexOf('https') > -1 ? 'http://api.keenoho.space' : 'https://api.keenoho.space');\n  setConfig({\n    app,\n    env,\n    mode,\n    publicKey,\n    ttl,\n    apiHost,\n  });\n}\n\nexport function loadNodeConfig() {}\n\nexport function loadConfig() {\n  if (judgePlatform() === PLATFORM_BROWSER) {\n    loadBrowserConfig();\n  } else {\n    loadNodeConfig();\n  }\n}\n\nexport function getConfig(key) {\n  if (key in storeConfig) {\n    return storeConfig[key];\n  }\n  return storeConfig;\n}\n\nexport function setConfig(key, value) {\n  if (arguments.length == 1 && typeof arguments[0] === 'object') {\n    for (let k in arguments[0]) {\n      storeConfig[k] = arguments[0][k] || storeConfig[k];\n    }\n  } else if (arguments.length == 2) {\n    storeConfig[key] = value || storeConfig[key];\n  }\n}\n\nexport function checkConfig(checkSignature = false) {\n  if (!storeConfig.app || !storeConfig.publicKey) {\n    throw new Error('the app or publicKey is not set in config, please use setConfig to set the values');\n  }\n  if (checkSignature && !storeConfig.signature) {\n    throw new Error('the signature has not sign, please use signature.sign to sign');\n  }\n}\n","import axios from 'axios';\nimport { getConfig } from '../config';\nimport { computeSession } from '../signature';\n\nconst defaultAxiosOptions = {\n  url: '',\n  baseURL: '',\n  params: undefined,\n  data: undefined,\n  header: undefined,\n  method: 'GET',\n  cancelToken: undefined,\n};\nconst defaultRequestOption = {\n  needApp: true,\n  needSignature: true,\n  needSessionId: true,\n  targetCode: 0,\n  takeInnerData: false,\n};\n\nconst Request = axios.create();\nRequest.interceptors.request.use(\n  function (config) {\n    const { requestOptions = defaultRequestOption } = config;\n    const { app, signature, apiHost } = getConfig();\n    if (!config.baseURL && apiHost) {\n      config.baseURL = apiHost;\n    }\n    if (!config.headers) {\n      config.headers = {};\n    }\n    if (requestOptions.needApp) {\n      config.headers['x-app'] = app;\n    }\n    if (requestOptions.needSignature) {\n      config.headers['x-signature'] = signature;\n    }\n    if (requestOptions.needSessionId) {\n      const u = new URL(config.url.indexOf('http') > -1 ? config.url : config.baseURL + config.url);\n      const pathname = u.pathname;\n      config.headers['x-session-id'] = computeSession(app, pathname, signature);\n    }\n\n    return config;\n  },\n  function (error) {\n    return Promise.reject(error);\n  }\n);\nRequest.interceptors.response.use(\n  function (response) {\n    const { requestOptions = defaultRequestOption } = response.config;\n    const data = response.data;\n    if (typeof data === 'object' && 'code' in data && 'msg' in data) {\n      const code = data.code;\n      if (code !== requestOptions.targetCode) {\n        throw data;\n      }\n    }\n\n    let finalData = data;\n    if (requestOptions.takeInnerData && typeof data === 'object' && 'data' in data) {\n      finalData = data.data;\n    }\n    return finalData;\n  },\n  function (error) {\n    if (error instanceof axios.AxiosError) {\n      const { response } = error;\n      if (!response) {\n        return Promise.reject(error);\n      }\n\n      const { requestOptions = defaultRequestOption } = response.config;\n      const data = response.data;\n      if (typeof data === 'object' && 'code' in data && 'msg' in data) {\n        const code = data.code;\n        if (code !== requestOptions.targetCode) {\n          return Promise.reject(data);\n        }\n      }\n\n      let finalData = data;\n      if (requestOptions.takeInnerData && typeof data === 'object' && 'data' in data) {\n        finalData = data.data;\n      }\n      return Promise.reject(finalData);\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport function request(axiosOptions = defaultAxiosOptions, requestOptions = defaultRequestOption) {\n  axiosOptions = Object.assign({}, defaultAxiosOptions, axiosOptions);\n  requestOptions = Object.assign({}, defaultRequestOption, requestOptions);\n  return Request({\n    ...axiosOptions,\n    requestOptions,\n  });\n}\n\nexport function get(axiosOptions = defaultAxiosOptions, requestOptions = defaultRequestOption) {\n  axiosOptions.method = 'GET';\n  return request(axiosOptions, requestOptions);\n}\n\nexport function post(axiosOptions = defaultAxiosOptions, requestOptions = defaultRequestOption) {\n  axiosOptions.method = 'POST';\n  return request(axiosOptions, requestOptions);\n}\n","import CryptoJS from 'crypto-js';\nimport { v4 as uuid } from 'uuid';\nimport { getConfig, checkConfig, setConfig } from '../config';\nimport { get } from '../util/request';\nimport { apiMap } from '../constant';\n\nexport function computeSign(app, ts, ttl, uid, publicKey) {\n  const str = `${app}${ts}${ttl}${uid}`.split('').sort().join('');\n  return CryptoJS.HmacSHA1(str, publicKey);\n}\n\nexport function computeSession(app, path, sign) {\n  const str = `${app}:${path}`.split('').sort().join('');\n  return CryptoJS.HmacSHA1(str, sign);\n}\n\nexport async function sign() {\n  checkConfig();\n  const { app, publicKey, ttl } = getConfig();\n  const ts = Date.now();\n  const uid = uuid();\n  const sig = computeSign(app, ts, ttl, uid, publicKey);\n  const res = await get(\n    {\n      url: apiMap.v1.SignatureSign,\n      params: {\n        app,\n        ts,\n        ttl,\n        sig,\n        randomId: uid,\n      },\n    },\n    {\n      needApp: false,\n      needSignature: false,\n      needSessionId: false,\n    }\n  );\n  if (res && res.code === 0) {\n    setConfig('signature', res.data);\n  }\n  return res;\n}\n\nexport async function check() {\n  checkConfig();\n  return await get({\n    url: apiMap.v1.SignatureCheck,\n    params: {},\n  });\n}\n\nexport async function refresh() {\n  checkConfig();\n  return await get({\n    url: apiMap.v1.SignatureRefresh,\n    params: {},\n  });\n}\n\nexport async function data() {\n  checkConfig();\n  return await get({\n    url: apiMap.v1.SignatureData,\n    params: {},\n  });\n}\n","import { getConfig, checkConfig, setConfig } from '../config';\nimport { get, post } from '../util/request';\nimport { apiMap } from '../constant';\n\nexport function login(options) {\n  checkConfig();\n  const { app } = getConfig();\n  return post({\n    url: apiMap.v1.UserLogin,\n    data: {\n      app,\n      ...options,\n    },\n  });\n}\n\nexport function info(options) {\n  checkConfig();\n  const { app } = getConfig();\n  return get({\n    url: apiMap.v1.UserInfo,\n    params: {\n      app,\n      ...options,\n    },\n  });\n}\n","export default class EventEmitter {\n  callbacks = {};\n  addEventListener(type, callback) {\n    this.callbacks[type] = callback;\n  }\n  removeEventListener(type) {\n    delete this.callbacks[type];\n  }\n  emit(type, ...args) {\n    if (typeof this.callbacks[type] === 'function') {\n      this.callbacks[type](...args);\n    }\n  }\n}\n","import { getConfig, loadConfig, setConfig } from './config';\nimport Logger from './util/logger';\nimport EventEmitter from './util/eventEmitter';\nimport { sign, check, refresh, data } from './signature';\nimport { login, info } from './user';\nimport { request } from './util/request';\n\nconst storeKeyMap = {\n  signature: 'keenoho_signature',\n  app: 'keenoho_app',\n  publicKey: 'keenoho_publicKey',\n};\n\nexport default class SDK extends (Logger, EventEmitter) {\n  config = {};\n  user = {};\n\n  constructor() {\n    super();\n    this.initConfig();\n    this.initSignature();\n  }\n\n  config(valueMap) {\n    setConfig(valueMap);\n    this.config = Object.assign(this.config, getConfig());\n  }\n\n  ready(callback) {\n    this.addEventListener('ready', callback);\n  }\n\n  error(callback) {\n    this.addEventListener('error', callback);\n  }\n\n  initConfig() {\n    loadConfig();\n    const storeApp = localStorage.getItem(storeKeyMap.app);\n    const storePublicKey = localStorage.getItem(storeKeyMap.publicKey);\n    this.config = Object.assign({}, getConfig());\n    if (storeApp) {\n      setConfig('app', +storeApp || undefined);\n      this.config.app = +storeApp || undefined;\n    }\n    if (storePublicKey) {\n      setConfig('publicKey', storePublicKey);\n      this.config.publicKey = storePublicKey;\n    }\n  }\n\n  async initSignature() {\n    const storeSignature = localStorage.getItem(storeKeyMap.signature);\n    if (storeSignature) {\n      setConfig('signature', storeSignature);\n      const checkRes = await check()\n        .then(() => {\n          return true;\n        })\n        .catch((err) => {\n          setConfig('signature', undefined);\n          localStorage.removeItem(storeKeyMap.signature);\n          this.emit('error', err);\n          return false;\n        });\n\n      if (checkRes) {\n        const refreshRes = await refresh()\n          .then(() => {\n            return true;\n          })\n          .catch((err) => {\n            setConfig('signature', undefined);\n            localStorage.removeItem(storeKeyMap.signature);\n            this.emit('error', err);\n            return false;\n          });\n        if (refreshRes) {\n          this.emit('ready');\n          return;\n        }\n      }\n    }\n    await sign()\n      .then((res) => {\n        if (res && res.code == 0 && res.data) {\n          return res.data;\n        }\n        throw res;\n      })\n      .then((res) => {\n        localStorage.setItem(storeKeyMap.signature, res);\n        this.emit('ready');\n      })\n      .catch((err) => {\n        setConfig('signature', undefined);\n        localStorage.removeItem(storeKeyMap.signature);\n        this.emit('error', err);\n      });\n  }\n\n  addPlugin(pluginFunc) {\n    pluginFunc.call(this);\n  }\n\n  sendRequest(axiosOptions, requestOptions) {\n    return request(axiosOptions, requestOptions);\n  }\n\n  login(options) {\n    return login(options).then((res) => {\n      if (res && res.code === 0) {\n        this.user = res.data;\n      }\n      return res;\n    });\n  }\n\n  info(options) {\n    return info(options);\n  }\n\n  data() {\n    return data();\n  }\n}\n","import * as config from './src/config';\nimport * as signature from './src/signature';\nimport * as user from './src/user';\nimport * as request from './src/util/request';\nimport SDK from './src/sdk';\n\nexport default {\n  config,\n  signature,\n  user,\n  request,\n  SDK,\n};\n"],"names":["uuid","request"],"mappings":"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"}