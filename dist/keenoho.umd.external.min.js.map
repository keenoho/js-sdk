{"version":3,"file":"keenoho.umd.external.min.js","sources":["../src/config.js","../src/util.js","../src/request.js","../src/eventEmitter.js","../src/sdk.js","../index.js"],"sourcesContent":["export function loadConfig() {\n  let config = {\n    ENV: 'production',\n    API_HOST: 'http://api.keenoho.space',\n    APP_ID: 2000000000000000,\n  };\n\n  let configTarget = typeof document === 'object' ? window : typeof process === 'object' ? process && process.env || null : null\n\n  if (!configTarget) {\n    return configTarget\n  }\n  if ('ENV' in configTarget) {\n    config.ENV = configTarget.ENV\n  }\n  if ('API_HOST' in configTarget) {\n    config.API_HOST = configTarget.API_HOST\n  }\n  if ('APP_ID' in configTarget) {\n    config.APP_ID = configTarget.APP_ID\n  }\n\n  return config;\n}\n","import { HmacSHA1 } from 'crypto-js';\n\nexport function isBrowser() {\n  return typeof document === 'object';\n}\n\nexport function generateSign(app, ttl, ts, randId) {\n  const str = `${app}${ts}${ttl}${randId}`.split('').sort().join('');\n  return HmacSHA1(str, app.toString()).toString();\n}\n\nexport function generateSignature(url, app, token) {\n  const str = `${app}:${url}`.split('').sort().join('');\n  const res = HmacSHA1(str, token).toString();\n  return res;\n}\n\nexport function makeResponse(data = null, code = 0, msg = 'ok') {\n  return {\n    data,\n    code,\n    msg,\n    time: Date.now(),\n  };\n}\n","import axios from 'axios';\nimport { makeResponse } from './util';\n\nconst defaultAxiosOptions = {\n  url: '',\n  baseURL: '',\n  params: undefined,\n  data: undefined,\n  headers: undefined,\n  method: 'GET',\n};\n\nconst defualtRequestOptions = {\n  checkCode: true,\n  targetCode: 0,\n};\n\nexport function baseRequest(axiosOptions = defaultAxiosOptions, requestOptions = defualtRequestOptions) {\n  let { baseURL, url, params, data, headers, method } = Object.assign({}, defaultAxiosOptions, axiosOptions);\n  let { checkCode, targetCode } = Object.assign({}, defualtRequestOptions, requestOptions);\n\n  return new Promise((resolve, reject) => {\n    axios({\n      baseURL,\n      url,\n      params,\n      data,\n      headers,\n      method,\n    })\n      .then((res) => {\n        if (!res || !('data' in res)) {\n          throw makeResponse(null, -1, 'request error');\n        }\n        const resData = res.data;\n        if (checkCode) {\n          if (!('code' in resData)) {\n            throw makeResponse(null, -1, 'code is not in response');\n          }\n          if (resData.code !== targetCode) {\n            throw resData;\n          }\n        }\n        resolve(resData);\n      })\n      .catch((err) => {\n        let data = null;\n        let code = -1;\n        let msg = 'request error';\n\n        if (err?.response?.data && typeof err?.response?.data === 'object' && 'data' in err?.response?.data) {\n          data = err?.response?.data?.data || data;\n          code = err?.response?.data?.code || code;\n          msg = err?.response?.data?.msg || msg;\n        } else if (err?.data && typeof err?.data === 'object' && 'data' in err?.data) {\n          data = err?.data?.data || data;\n          code = err?.data?.code || code;\n          msg = err?.data?.msg || msg;\n        } else {\n          data = err?.data || data;\n          code = err?.code || code;\n          msg = err?.msg || msg;\n        }\n        let resData = makeResponse(data, code, msg);\n        reject(resData);\n      })\n      .finally(() => {});\n  });\n}\n","export default class EventEmitter {\n  constructor() {\n    this.eventMap = {};\n  }\n\n  on(event, callback) {\n    this.eventMap[event] = callback;\n  }\n\n  off(event, callback) {\n    delete this.eventMap[event];\n  }\n\n  emit(event, ...args) {\n    if (event in this.eventMap && typeof this.eventMap[event] === 'function') {\n      this.eventMap[event](...args);\n    }\n  }\n}\n","import { v4 as UUID } from 'uuid';\nimport { loadConfig } from './config';\nimport { baseRequest } from './request';\nimport { generateSign, generateSignature } from './util';\nimport EventEmitter from './eventEmitter';\n\nexport const sdkDefaultAxiosOptions = {\n  url: '',\n  params: undefined,\n  data: undefined,\n  headers: undefined,\n  method: 'GET',\n};\n\nexport const sdkDefualtRequestOptions = {\n  showLoading: false,\n  handleLoadingFunc: undefined,\n  showError: false,\n  handleErrorFunc: undefined,\n  checkCode: true,\n  targetCode: 0,\n};\n\nexport const sdkDefaultOptions = {\n  autoRenewToken: true,\n  tokenTtl: 28800,\n};\n\nexport class SDK extends EventEmitter {\n  static getSessionHandler() {\n    return localStorage.getItem('keenoho_session');\n  }\n\n  static setSessionHandler(session, expired, user) {\n    localStorage.setItem('keenoho_session', session);\n    localStorage.setItem('keenoho_session_expired', expired);\n    return {\n      session,\n      expired,\n    };\n  }\n\n  constructor(config, sdkOption = sdkDefaultOptions) {\n    super();\n    this.event;\n    this.sdkOption = sdkOption;\n    this.config = config || loadConfig();\n    this.token = undefined;\n    this.tokenExpired = undefined;\n    this.init();\n  }\n\n  async init() {\n    await this.initToken();\n    this.emit('ready', this);\n  }\n\n  async initToken(ttl = this.sdkOption?.tokenTtl) {\n    const baseURL = this.config.API_HOST;\n    const app = this.config.APP_ID;\n    const ts = Date.now();\n    const randId = UUID();\n    const sign = generateSign(app, ttl, ts, randId);\n    const res = await baseRequest({\n      baseURL,\n      url: '/v1/signature/token',\n      method: 'GET',\n      params: {\n        app,\n        ttl,\n        ts,\n        randId,\n        sign,\n      },\n    });\n    const { token, expired } = res?.data || {};\n    this.token = token;\n    this.tokenExpired = expired;\n  }\n\n  async checkTokenExpired(\n    autoRenew = this.sdkOption?.autoRenew,\n    tokenTtl = this.sdkOption?.tokenTtl,\n    early = 10 * 60 * 1000\n  ) {\n    if (!this.token || !this.tokenExpired) {\n      return;\n    }\n    let isExpired = Date.now() >= this.tokenExpired - early;\n    if (isExpired && autoRenew) {\n      await this.initToken(tokenTtl).then(() => {\n        isExpired = false;\n      });\n    }\n    return isExpired;\n  }\n\n  async request(axiosOptions = sdkDefaultAxiosOptions, requestOptions = sdkDefualtRequestOptions) {\n    await this.checkTokenExpired();\n    const aopt = Object.assign({}, sdkDefaultAxiosOptions, axiosOptions);\n    const ropt = Object.assign({}, sdkDefualtRequestOptions, requestOptions);\n\n    const token = this.token;\n    const baseURL = this.config.API_HOST;\n    const app = this.config.APP_ID;\n    const sid = SDK.getSessionHandler();\n    const headers = {\n      'x-app': app,\n      'x-tk': token,\n      'x-sig': generateSignature(axiosOptions.url, app, token),\n      'x-sid': sid,\n    };\n\n    aopt.baseURL = baseURL;\n    aopt.headers = Object.assign(headers, aopt.headers);\n\n    return baseRequest(aopt, ropt);\n  }\n\n  // signature\n  signatureTest() {\n    return this.request({\n      url: '/v1/signature/test',\n    });\n  }\n\n  sessionCheck() {\n    return this.request({\n      url: '/v1/signature/session/check',\n    });\n  }\n\n  sessionRefresh() {\n    return this.request({\n      url: '/v1/signature/session/refresh',\n    });\n  }\n\n  // user\n  userSignin(data) {\n    return this.request({\n      url: '/v1/user/signin',\n      method: 'POST',\n      data,\n    });\n  }\n\n  userLogin(data) {\n    return this.request({\n      url: '/v1/user/login',\n      method: 'POST',\n      data,\n    }).then((res) => {\n      const { session, expired, user } = res?.data || {};\n      SDK.setSessionHandler(session, expired, user);\n      return res;\n    });\n  }\n\n  userInfo(params) {\n    return this.request({\n      url: '/v1/user/info',\n      params,\n    });\n  }\n\n  // file\n  async fileUpload(filePath, file) {\n    const token = await this.request({\n      url: '/v1/file/token',\n      method: 'POST',\n      data: { filePath },\n    }).then((res) => {\n      if (res?.code === 0) {\n        return res?.data;\n      }\n    });\n    if (!token) {\n      throw new Error('get file upload token fail');\n    }\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('filePath', filePath);\n    formData.append('token', token);\n\n    return this.request({\n      url: '/v1/file/upload',\n      method: 'POST',\n      data: formData,\n    });\n  }\n}\n","// import { isBrowser } from './src/util';\nimport * as config from './src/config';\nimport * as request from './src/request';\nimport * as SDK from './src/sdk';\n\nexport default {\n  config,\n  request,\n  ...SDK,\n};\n"],"names":["loadConfig","config","ENV","API_HOST","APP_ID","configTarget","_typeof","document","window","process","env","generateSign","app","ttl","ts","randId","str","concat","split","sort","join","HmacSHA1","toString","generateSignature","url","token","makeResponse","data","arguments","length","undefined","code","msg","time","Date","now","defaultAxiosOptions","baseURL","params","headers","method","defualtRequestOptions","checkCode","targetCode","baseRequest","axiosOptions","requestOptions","_Object$assign","Object","assign","_Object$assign2","Promise","resolve","reject","axios","then","res","resData","err","_err$response","_err$response2","_err$response3","_err$response4","_err$response5","_err$response6","response","_err$data","_err$data2","_err$data3","EventEmitter","_classCallCheck","this","eventMap","_createClass","key","value","event","callback","_this$eventMap","_len","args","Array","_key","apply","sdkDefaultAxiosOptions","sdkDefualtRequestOptions","showLoading","handleLoadingFunc","showError","handleErrorFunc","sdkDefaultOptions","autoRenewToken","tokenTtl","SDK","_EventEmitter","_inherits","_fileUpload","_request","_checkTokenExpired","_initToken","_init","_super","_createSuper","_this","sdkOption","call","tokenExpired","init","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","initToken","emit","stop","_callee2","_this$sdkOption","sign","_ref","expired","_args2","_context2","UUID","v4","sent","_callee3","_this$sdkOption2","_this$sdkOption3","autoRenew","early","isExpired","_args3","_context3","abrupt","_callee4","aopt","ropt","sid","_args4","_context4","checkTokenExpired","getSessionHandler","request","_ref2","session","user","setSessionHandler","_callee5","filePath","file","formData","_context5","Error","FormData","append","_x","_x2","localStorage","getItem","setItem","index","_objectSpread"],"mappings":"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"}